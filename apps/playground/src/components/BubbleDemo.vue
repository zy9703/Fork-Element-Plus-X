<!-- home é¦–é¡µ-ä½¿ç”¨ Bubble ç»„ä»¶ -->
<script setup lang="ts">
import { DocumentCopy, Refresh, Search, Star } from '@element-plus/icons-vue'
import { usePrism } from 'vue-element-plus-x'
import 'vue-element-plus-x/styles/prism-solarizedlight.min.css'
// import Bubble from 'vue-element-plus-x/src/components/Bubble/index.vue'
// import AppConfig from 'vue-element-plus-x/src/components/AppConfig/index.vue'
import markdownItMermaid from '@jsonlee_12138/markdown-it-mermaid'

const avatar = ref(
  'https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png',
)
const loading = ref(true)
const content = ref('')

const highlight = usePrism()

const mdPlugins = [markdownItMermaid({ delay: 100, forceLegacyMathML: true })]

onMounted(() => {
  setTimeout(() => {
    setTimeout(() => {
      content.value = `
# æ ‡é¢˜
è¿™æ˜¯ä¸€ä¸ª Markdown ç¤ºä¾‹ã€‚
- åˆ—è¡¨é¡¹ 1
- åˆ—è¡¨é¡¹ 2
**ç²—ä½“æ–‡æœ¬** å’Œ *æ–œä½“æ–‡æœ¬*
\`\`\`javascript
console.log('Hello, world!');
\`\`\`

\`\`\`mermaid
pie
    "ä¼ åª’åŠæ–‡åŒ–ç›¸å…³" : 35
    "å¹¿å‘Šä¸å¸‚åœºè¥é”€" : 8
    "æ¸¸æˆå¼€å‘" : 15
    "å½±è§†åŠ¨ç”»ä¸ç‰¹æ•ˆ" : 12
    "äº’è”ç½‘äº§å“è®¾è®¡" : 10
    "VR/ARå¼€å‘" : 5
    "å…¶ä»–" : 15
\`\`\`

\`\`\`mermaid
sequenceDiagram
    autonumber
    participant 1 as $$alpha$$
    participant 2 as $$beta$$
    1->>2: Solve: $$\sqrt{2+2}$$
    2-->>1: Answer: $$2$$
    Note right of 2: $$\sqrt{2+2}=\sqrt{4}=2$$
\`\`\`
`.trim()
      loading.value = false
    }, 500)
  }, 2000)
})
</script>

<template>
  <AppConfig :md-plugins="mdPlugins" :highlight="highlight">
    <div class="component-container">
      <p>æ–°ç‰ˆæœ¬æ”¯æŒ æ‰“å­—å™¨ é›¾åŒ–æ•ˆæœ ä½¿ç”¨ Mermaid.js æ”¯æŒç®€å•çš„å›¾è¡¨å’Œå‡½æ•°å…¬å¼ </p>
      <div class="component-1">
        <Bubble placement="start" :content="content" shape="corner" variant="shadow" :loading="loading" :typing="{
          step: 2,
          suffix: 'ğŸ’—',
        }" :is-markdown="true" :is-fog="{ bgColor: '#FFFFFF' }">
          <template #avatar>
            <el-avatar :size="32" :src="avatar" />
          </template>

          <!-- <template #content>
          <div class="content-container">åœ¨è¿™é‡Œå¯ä»¥è‡ªå®šä¹‰å†…å®¹ï¼Œæ”¯æŒæ’æ§½ã€‚</div>
        </template> -->

          <template #footer>
            <div class="footer-container">
              <el-button type="info" :icon="Refresh" size="small" circle />
              <el-button type="success" :icon="Search" size="small" circle />
              <el-button type="warning" :icon="Star" size="small" circle />
              <el-button color="#626aef" :icon="DocumentCopy" size="small" circle />
            </div>
          </template>
        </Bubble>
      </div>
    </div>
  </AppConfig>
</template>

<style scoped lang="scss">
.component-container {
  background-color: white;
  padding: 12px;
  border-radius: 15px;

  .component-1 {
    .footer-container {
      :deep() {
        .el-button+.el-button {
          margin-left: 8px;
        }
      }
    }
  }
}
</style>
